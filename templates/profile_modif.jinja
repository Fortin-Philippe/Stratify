{% extends "base.jinja" %}

{% block title %}Modifier Profil{% endblock %}

{% block content %}
<div class="container mt-4 p-4" style="background-color: rgba(15, 44, 27, 0.2); border-radius: 12px;">
    <h1 class="mb-4 text-center" style="color: rgb(255, 255, 255);">Modifier Profil</h1>
    <form method="POST">
        <div class="mb-3">
            <label class="form-label" style="color: rgb(105,240,174);">Nom</label>
            <input class="form-control" type="text" name="user_name" value="{{ user.user_name }}"
                   minlength="4" maxlength="60" required>
        </div>

        <div class="mb-3">
            <label class="form-label" style="color: rgb(105,240,174);">Description</label>
            <textarea class="form-control" name="description" rows="3" maxlength="300">{{ user.description }}</textarea>
            <small class="form-text text-light">{{ user.description|length }}/300 caractères</small>
        </div>

        <div class="mb-3">
            <label class="form-label" style="color: rgb(105,240,174);">Mot de passe (laisser vide si inchangé)</label>
            <input class="form-control" type="password" name="mdp" minlength="3" maxlength="100">
        </div>

        {# <div class="mb-3">
            <label class="form-label" style="color: rgb(105,240,174);">Jeux</label><br>
            {% set jeux_possibles = ["League of Legends", "Valorant", "CS2", "Rocket League"] %}
            {% for jeu in jeux_possibles %}
                <div class="form-check form-check-inline">
                    <input type="checkbox" name="lstJeux" value="{{ jeu }}"
                        {% if user.lstJeux and jeu in user.lstJeux %} checked {% endif %}>
                    <label class="form-check-label" style="color: rgb(105,240,174);">{{ jeu }}</label>
                </div>
            {% endfor %}
        </div> #}

        <div class="mb-3">
            <label class="form-label" style="color: rgb(105,240,174);">Avatar</label>
            <select class="form-select" name="image">
                <option value="">-- Choisir une image --</option>
                {% for fichier in images_profiles %}
                    <option value="{{ fichier }}" {% if user.image == fichier %}selected{% endif %}>
                        {{ fichier.split('/')[-1] }}
                    </option>
                {% endfor %}
            </select>
            {% if user.image %}
                <img src="{{ url_for('static', filename=user.image) }}" 
                     alt="Avatar" class="img-thumbnail mt-2" width="120">
            {% endif %}
        </div>

        <button class="btn btn-success" type="submit">Enregistrer</button>
    </form>
</div>
{% endblock %}
