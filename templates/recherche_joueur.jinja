{% extends 'base.jinja' %}

{% block content %}
<div class="joueurs-container">

    <div class="coachs-header text-center mb-4">
        <h1>Recherche de joueurs</h1>
        <p class="subtitle">Trouvez un joueur par son nom ou son courriel</p>
    </div>

    <form method="get" action="{{ url_for('compte.rechercher_utilisateur') }}" class="search-bar mb-4 text-center">
        <div class="input-group justify-content-center" style="max-width:500px;">
            <input type="text" name="q" class="form-control" placeholder="Nom d'utilisateur ou courriel..."
                   value="{{ recherche }}">
            <button class="btn btn-primary" type="submit">Rechercher</button>
        </div>
    </form>

    {% if resultats %}
    <div class="list-group shadow-sm">
        {% for joueur in resultats %}
        <a href="{{ url_for('compte.voir_profil', user_id=joueur.id) }}"
           class="list-group-item list-group-item-action d-flex align-items-center text-decoration-none py-3">
            <div class="me-3">
                {% if joueur.image %}
                <img src="{{ url_for('static', filename=joueur.image) }}" alt="{{ joueur.user_name }}"
                     class="rounded-circle border border-success" width="60" height="60">
                {% else %}
                <div class="rounded-circle bg-primary text-white d-flex justify-content-center align-items-center fw-bold"
                     style="width:60px; height:60px; font-size:1.5rem;">
                    {{ joueur.user_name[0]|upper }}
                </div>
                {% endif %}
            </div>

            <div class="flex-grow-1">
                <h5 class="fw-bold mb-1 text-dark">
                    {% if joueur.est_supprime %}
                        <span class="text-muted">Compte supprimé</span>
                    {% else %}
                        {{ joueur.user_name }}
                    {% endif %}
                </h5>
                <p class="mb-1"><strong>Courriel :</strong>
                    {% if joueur.est_supprime %}Indisponible{% else %}{{ joueur.courriel }}{% endif %}
                </p>
                <p class="mb-0"><strong>Description :</strong>
                    {% if joueur.est_supprime %}Utilisateur supprimé{% else %}{{ joueur.description or "Aucune description" }}{% endif %}
                </p>
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="alert alert-info text-center">
        Aucun joueur trouvé.
    </div>
    {% endif %}

</div>
{% endblock %}